<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Past Experience - Second Brain</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='fav.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header class="app-bar">
        <a href="{{ url_for('dashboard') }}" class="app-bar-link">
            <span class="logo">üß†</span>
            <span class="app-name">Second Brain</span>
        </a>
        <nav class="app-nav">
            <a href="{{ url_for('dashboard') }}" class="nav-link">üè† Dashboard</a>
            <a href="{{ url_for('todays_tasks') }}" class="nav-link">üìÖ Today's Tasks</a>
            <a href="{{ url_for('create_todo') }}" class="nav-link">‚ûï Create Todo</a>
            <a href="{{ url_for('all_todos') }}" class="nav-link">üìã All Todos</a>
            <a href="{{ url_for('create_experience') }}" class="nav-link">üí° Past Experience</a>
            <a href="{{ url_for('view_experiences') }}" class="nav-link active">üìö All Experiences</a>
        </nav>
    </header>

    <div class="full-screen-container">
        <main>
            <div class="form-container">
                <h2>Edit Past Experience</h2>
                
                <form method="POST" action="{{ url_for('edit_experience', id=experience['id']) }}">
                    <div class="form-group">
                        <label for="title">
                            Title *
                            <span class="char-counter" id="titleCounter">0/200</span>
                        </label>
                        <input type="text" id="title" name="title" required 
                               value="{{ experience['title'] }}" placeholder="Enter experience title" maxlength="200">
                    </div>

                    <div class="form-row-split">
                        <div class="form-group form-group-wide">
                            <label for="tags">
                                Tags (comma-separated)
                                <span class="char-counter" id="tagsCounter">0/200</span>
                            </label>
                            <input type="text" id="tags" name="tags" 
                                   value="{{ experience['tags'] or '' }}" placeholder="e.g., python, debugging, api" maxlength="200">
                        </div>

                        <div class="form-group">
                            <label for="category">Category</label>
                            <select id="category" name="category">
                                <option value="">Select Category</option>
                                <option value="Technical" {% if experience['category'] == 'Technical' %}selected{% endif %}>Technical</option>
                                <option value="Problem-Solving" {% if experience['category'] == 'Problem-Solving' %}selected{% endif %}>Problem-Solving</option>
                                <option value="Project" {% if experience['category'] == 'Project' %}selected{% endif %}>Project</option>
                                <option value="Learning" {% if experience['category'] == 'Learning' %}selected{% endif %}>Learning</option>
                                <option value="Best-Practice" {% if experience['category'] == 'Best-Practice' %}selected{% endif %}>Best Practice</option>
                                <option value="Troubleshooting" {% if experience['category'] == 'Troubleshooting' %}selected{% endif %}>Troubleshooting</option>
                                <option value="Design" {% if experience['category'] == 'Design' %}selected{% endif %}>Design</option>
                                <option value="Other" {% if experience['category'] == 'Other' %}selected{% endif %}>Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="context">
                            Context / Situation
                            <span class="char-counter" id="contextCounter">0/500</span>
                        </label>
                        <textarea id="context" name="context" rows="3" placeholder="Brief context about when/why this experience occurred (helps LLM understand relevance)..." maxlength="500">{{ experience['context'] or '' }}</textarea>
                    </div>

                    <div class="form-group">
                        <label for="content">
                            Past Experience
                            <span class="char-counter" id="contentCounter">0/10000</span>
                        </label>
                        <textarea id="content" name="content" rows="21" placeholder="Write about your past experience..." maxlength="10000">{{ experience['content'] or '' }}</textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Update Experience</button>
                        <a href="{{ url_for('view_experiences') }}" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <script>
        // Title character counter
        const titleInput = document.getElementById('title');
        const titleCounter = document.getElementById('titleCounter');
        
        // Initialize title counter with existing value
        titleCounter.textContent = titleInput.value.length + '/200';
        
        titleInput.addEventListener('input', function() {
            const length = this.value.length;
            titleCounter.textContent = length + '/200';
        });

        // Tags character counter
        const tagsInput = document.getElementById('tags');
        const tagsCounter = document.getElementById('tagsCounter');
        
        // Initialize tags counter with existing value
        tagsCounter.textContent = tagsInput.value.length + '/200';
        
        tagsInput.addEventListener('input', function() {
            const length = this.value.length;
            tagsCounter.textContent = length + '/200';
        });

        // Context character counter
        const contextInput = document.getElementById('context');
        const contextCounter = document.getElementById('contextCounter');
        
        // Initialize context counter with existing value
        contextCounter.textContent = contextInput.value.length + '/500';
        
        contextInput.addEventListener('input', function() {
            const length = this.value.length;
            contextCounter.textContent = length + '/500';
        });

        // Content character counter
        const contentInput = document.getElementById('content');
        const contentCounter = document.getElementById('contentCounter');
        
        // Initialize content counter with existing value
        contentCounter.textContent = contentInput.value.length + '/10000';
        
        contentInput.addEventListener('input', function() {
            const length = this.value.length;
            contentCounter.textContent = length + '/10000';
        });
    </script>
</body>
</html>
